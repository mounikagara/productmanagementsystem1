package product;

public class Product {
	int  pid;
	 String name;
	 double price;
	 int quantity;
	 public int getPid() {
		 return pid;
	 }
	 public void setPid(int pid) {
		 this.pid = pid;
	 }
	 public String getName() {
		 return name;
	 }
	 public void setName(String name) {
		 this.name = name;
	 }
	 public double getPrice() {
		 return price;
	 }
	 public void setPrice(double price) {
		 this.price = price;
	 }
	 public int getQuantity() {
		 return quantity;
	 }
	 public void setQuantity(int quantity) {
		 this.quantity = quantity;
	 }
	 @Override
	 public String toString() {
		return "Product [pid=" + pid + ", name=" + name + ", price=" + price + ", quantity=" + quantity + "]";
	 }
}


package product;
import java.util.*;
import java.io.*;

public class ProductService {
	public List<Product> inventory ;
	ProductService(){
		inventory = new ArrayList<Product>();
	}
	public void display() {
		System.out.println(inventory);
	}
	void addProduct(Product p) {
	inventory.add(p);	
	}
	public boolean searchProduct(int id) {
		boolean found=false;
		for(Product p:inventory) {
			if(p.getPid()==id) {
				found =true;
				System.out.println("Product Found "+p);
				break;
			}
		}
		return found;
	}
	public void removeProduct(int id) {
	    Iterator<Product> it = inventory.iterator();
	    boolean found = false;
	    while (it.hasNext()) {
	        Product p = it.next();
	        if (p.getPid() == id) {
	            it.remove();
	            found = true;
	            System.out.println("Product removed successfully");
	            break;
	        }
	    }
	    if (!found) {
	        System.out.println("Product not found so cannot delete");
	    }
	}
	
	public void CheckLowInventory() {
		for(Product p: inventory) {
			if(p.getQuantity()<10) {
				System.out.println(p.getName()+p.getQuantity());
			}
		}
	}
	public int totalInventoryValue() {
		int totalvalue=0;
		for(Product p:inventory) {
			totalvalue+=p.getQuantity();	
		}
		return totalvalue;
	}

	public void toFileFormat() {
		 System.out.println("Inventory size before writing: " + inventory.size());
		try {
			FileWriter fw = new FileWriter("D:\\ProductM.S\\product.txt");
			BufferedWriter bw = new BufferedWriter(fw);
			for (Product p : inventory) {
				bw.write(p.getPid() + ", " + p.getName() + ", " + p.getPrice() + ", " + p.getQuantity());
				bw.newLine();
			}
			bw.close();
			System.out.println("Products added successfully into the file");
		} catch (IOException e) {
			System.out.println("Error writing to file");

		}

	}
	public void readFile() {
		try (BufferedReader br = new BufferedReader(new FileReader("D:\\ProductM.S\\product.txt"))) {
			String x;
			while((x=br.readLine())!=null) {
				String data[]=x.split(",");

	            int id = Integer.parseInt(data[0]);
	            String name = data[1];
	            double price = Double.parseDouble(data[2]);
	            int quantity = Integer.parseInt(data[3]);
	            

	            Product p = new Product();
	            p.setPid(id);
	            p.setName(name);
	            p.setPrice(price);
	            p.setQuantity(quantity);

	            inventory.add(p);
			}
			System.out.println("Products loaded from file successfully");
			display();
			
		}
		catch(IOException e) {
			System.out.println("File Not Found");
			
		} catch (NumberFormatException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
}



package product;
import java.util.*;
public class MainInventory {
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		ProductService ps = new ProductService();
		//ps.display();
		Scanner sc = new Scanner(System.in);
		int n;
		int choice;
		do {
			System.out.println("\nProducts details");
			System.out.println("1. Add Product");
			System.out.println("2. Remove Product");
			System.out.println("3. Search Products");
			System.out.println("4. Show All Products");
			System.out.println("5. Check Low Inventory Value ");
			System.out.println("6. Check total Inventory value");
			System.out.println("7. Save Products to File ");
			System.out.println("8. Load Products From Files");
			System.out.println("9. Exit");
			System.out.println("Enter Your Choice :");
			choice= sc.nextInt();	
			
			switch (choice) {
			case 1:
				System.out.print("Enter number of products to add: ");
				n = sc.nextInt();
				for (int i = 1; i <= n; i++) {
					System.out.println("\nEnter details of product " + i);
					Product p = new Product();
					System.out.print("Enter PID: ");
					p.setPid(sc.nextInt());
					System.out.print("Enter Name: ");
					p.setName(sc.next());
					System.out.print("Enter Price: ");
					p.setPrice(sc.nextDouble());
					System.out.print("Enter Quantity: ");
					p.setQuantity(sc.nextInt());
					ps.addProduct(p);
				}
				break;
			case 2:
				System.out.print("Enter product ID to remove: ");
				ps.removeProduct(sc.nextInt());
				break;
			case 3:
				System.out.print("Enter product ID to search: ");
				ps.searchProduct(sc.nextInt());
				break;
			case 4:
				ps.display();
				break;
			case 5:
				ps.CheckLowInventory();
				break;
			case 6:
				System.out.println("Total Inventory Value: " + ps.totalInventoryValue());
				break;
			case 7:
				ps.toFileFormat();
				break;
			case 8:
				ps.readFile();
				break;
			case 9:
				System.out.println("Exiting...");
				break;
			default:
				System.out.println("Invalid choice");
			}
		} while (choice != 9);
		
		sc.close();

	}
}

